<div 
  #window
  class="data-window" 
  [style.width.px]="tableState.width" 
  [style.height.px]="tableState.height"
  [style.z-index]="tableState.zIndex"
  cdkDrag
  [cdkDragFreeDragPosition]="{x: tableState.x, y: tableState.y}"
  [cdkDragBoundary]="'.main-content'"
  (cdkDragStarted)="onDragStarted()"
  (cdkDragEnded)="onDragEnded($event)"
  (click)="onWindowClick()">
  
  <div class="window-header" cdkDragHandle>
    <div class="window-title">{{ tableState.name }}</div>
    <div class="window-controls">
      <button class="close-button" (click)="onCloseClick($event)" title="Close window">
        ✕
      </button>
    </div>
  </div>
  
  <div class="window-content">
    <div *ngIf="!tableState.data || tableState.data.length === 0" class="loading-indicator">
      Loading data...
    </div>
    <div *ngIf="tableState.data && tableState.data.length > 0">
      <div class="data-info">Rows: {{tableState.data?.length}}, Columns: {{tableState.columns?.length}}</div>
      <app-data-table 
        [data]="tableState.data" 
        [columns]="tableState.columns || []">
      </app-data-table>
    </div>
  </div>
  
  <div 
    #resizeHandle
    class="resize-handle" 
    (mousedown)="startResize($event)">
    ⤡
  </div>
</div>
